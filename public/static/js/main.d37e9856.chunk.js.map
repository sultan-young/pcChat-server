{"version":3,"sources":["common/global.js","redux/actions/group.js","redux/actions/avatoar.js","redux/actions/currentChatData.js","redux/reduces/login.js","redux/reduces/avatoar.js","redux/reduces/userinfo.js","redux/reduces/session.js","redux/reduces/linkman.js","redux/reduces/novalidation.js","redux/reduces/currentChatData.js","redux/reduces/converId.js","redux/reduces/group.js","redux/reduces/index.js","redux/store.js","common/util.js","common/vq.js","common/server.js","pages/Account/index.jsx","assets/LOGO.png","components/baseUi/Avatar.js/index.jsx","pages/Chat/components/Header/index.jsx","redux/actions/userinfo.js","common/avatoar_map.js","pages/Chat/components/ChangeAvatar/index.jsx","components/Home/index.jsx","pages/Chat/components/Space/index.jsx","redux/actions/session.js","redux/actions/linkman.js","redux/actions/novalidation.js","redux/actions/converId.js","components/baseUi/FullLoading/index.jsx","components/ChatItem/index.jsx","pages/Chat/components/session/index.jsx","common/context.js","components/Model/index.jsx","pages/Chat/components/Linkman/index.jsx","pages/Chat/components/Group/index.jsx","common/websocket.js","pages/Chat/components/ChatPanel/index.jsx","pages/Chat/index.jsx","routers/PrivateRoute .js","routers/index.js","App.js","reportWebVitals.js","index.js"],"names":["Avatoar_Generator","AvatarStyle","Top","Accessories","HairColor","FacialHair","FacialHairColor","Cloth","ClothColor","Eyes","Eyebrow","Mouth","Skin","addGroupAction","groupObj","type","data","updateAvatoarAction","option","updateSyncAvatoar","showMsg","dispatch","a","updateAvatoar","result","success","message","appendConverAction","updateChatDataAction","updateHistoryAction","syncAppendConverAction","UID","localStorage","getItem","history","map","cover","isMySelf","talker","lastHistory","syncUpdateHistoryAction","converObj","converId","login","prevState","action","avatoar","newState","userinfo","userInfo","session","filter","item","username","linkman","novalidation","chatData","index","findIndex","_id","targetObj","currentConverId","groupList","combineReducers","navalidation","group","persistConfig","key","storage","whitelist","persistedReducer","persistReducer","reducers","store","createStore","composeWithDevTools","applyMiddleware","thunk","persistor","persistStore","randomGenerator","rowdomAvatoarObj","i","arr","randomIndex","Math","floor","random","length","vq","axios","create","method","timeout","baseURL","interceptors","request","use","config","token","uid","url","replace","headers","authorization","err","Promise","reject","response","error","errorCode","status","window","location","pathname","userlogin","password","setItem","updateUserInfo","info","queryUserInfo","userRegister","email","randomAvatar","user","fetchContactList","fetchChatHistoryData","queryLinkMan","addLinkMan","createGroup","usersList","nickname","getState","msg","resultObj","groupName","members","size","respondAdd","isAgree","code","Account","props","React","useState","setUsername","setpassword","setemail","submitType","setSubmitType","text","push","onChangeInputValue","e","value","target","className","src","alt","data-validate","bordered","onChange","data-placeholder","onClick","Avatar","style","width","avatarStyle","topType","accessoriesType","hairColor","facialHairType","facialHairColor","clotheType","clotheColor","eyeType","eyebrowType","mouthType","skinColor","graphicType","GraphicType","connect","popoverVisible","setPopoverVisible","onTabPerson","onSwitchDrawer","menu","clear","placement","content","updateUserInfoAction","updateSyncUserInfo","AVATOAR_MAP","OPTION_MAP","ChangeAvatar","optionCopy","resetOption","submitOption","changeOptionFn","backFn","Object","keys","Option","moment","locale","Home","lastLoginTime","startOf","fromNow","sex","signature","isOnLine","layout","labelCol","span","wrapperCol","tailLayout","offset","mapDispatchToProps","onClose","onFinish","values","radio","obj","setOptionCopy","showAvatorOption","setShowAvatorOption","name","initialValues","onFinishFailed","errorInfo","Item","label","rules","TextArea","Group","htmlType","addSessionAction","sessionObj","addLinkmanAction","linkManObj","deleteValidaAction","updateCurrentConverId","FullLoading","children","pageStatus","tip","respondAddPerson","isSelected","respondAddFn","currentChatData","useMemo","find","data-chat","onClickAddLinkMan","checked","contactData","chatContext","createContext","Search","Input","ChatModel","isModalVisible","handleCancel","queryList","onSearch","title","onTabItem","submit","console","log","inputValue","setInputValue","memoList","includes","visible","onCancel","onOk","keyboard","wrapClassName","cancelText","okText","closable","placeholder","allowClear","enterButton","Linkman","linkManList","noValidation","setIsModalVisible","_linkManData","setLinkManData","setQueryList","chatContextValue","useContext","setRightType","setCurrentUserOption","searchValue","document","getElementsByClassName","maxHeight","useEffect","UserAddOutlined","_index","mapLinkManList","onClickItem","randomIcon","slice","SmileTwoTone","HeartTwoTone","CheckCircleTwoTone","BankTwoTone","CarTwoTone","CrownTwoTone","CompassTwoTone","BulbTwoTone","StarTwoTone","mapList","setMapList","currentUidList","UsergroupAddOutlined","current","ws","getWebSecket","WebSocket","SUB_UID","onopen","sendMsg","onclose","onmessage","wsData","parseData","JSON","parse","notification","open","description","icon","SmileOutlined","color","asyncAddValidaList","PUB_UID","send","stringify","sendGroup","talkerName","autoScroll","ref","dom","scrollTop","scrollHeight","clientHeight","nickName","currentChatUser","date","calendar","chatValue","setChatValue","chatRef","useRef","isShowDown","setIsShowDown","sendMessage","Date","getTime","read","setTimeout","chatDom","onscroll","DownCircleTwoTone","onPressEnter","updateSessionAction","sessionList","updateLinkmanAction","updateValidaAction","validaList","syncUpdateChatDataAction","mapData","updateGroupAction","validationList","setSearchValue","drawerVisible","setDrawerVisible","setPageStatus","rightType","currentUserInfo","fetchChatData","all","mapGroupList","timer","clearTimeout","onClickSession","filterList","dataList","preview","to","activeClassName","ProfileOutlined","UserOutlined","TeamOutlined","Provider","path","render","getContainer","position","component","RouterPage","Chat","Component","App","loading","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","getElementById"],"mappings":"kkBACaA,G,OAAoB,CAC7BC,YAAa,CACT,SACA,eAEJC,IAAI,CACA,SACA,WACA,MACA,QACA,SACA,aACA,aACA,aACA,aACA,kBACA,cACA,cACA,gBACA,gBACA,iBACA,gBACA,cACA,kBACA,qBACA,sBACA,qBACA,mBACA,oBACA,yBACA,oBACA,oBACA,mBACA,wBACA,sBACA,qBACA,sBACA,sBACA,iBACA,qBACA,8BAEJC,YAAa,CACT,QACA,OACA,iBACA,iBACA,QACA,aACA,aAEJC,UAAW,CACP,SACA,QACA,SACA,eACA,QACA,YACA,aACA,WACA,MACA,cAEJC,WAAY,CACR,QACA,cACA,aACA,gBACA,iBACA,mBAEJC,gBAAiB,CACb,SACA,QACA,SACA,eACA,QACA,YACA,WACA,OAEJC,MAAO,CACH,cACA,gBACA,gBACA,eACA,SACA,UACA,gBACA,iBACA,cAEJC,WAAY,CACR,QACA,SACA,SACA,SACA,SACA,SACA,UACA,aACA,cACA,eACA,YACA,eACA,OACA,MACA,SAEJC,KAAM,CACF,QACA,MACA,UACA,QACA,UACA,QACA,SACA,OACA,SACA,YACA,OACA,aAEJC,QAAS,CACL,QACA,eACA,UACA,iBACA,cACA,gBACA,uBACA,eACA,sBACA,iBACA,SACA,iBAEJC,MAAO,CACH,YACA,UACA,YACA,SACA,UACA,MACA,aACA,UACA,QACA,SACA,UACA,SAEJC,KAAM,CACF,SACA,SACA,OACA,QACA,QACA,YACA,W,0BC7JKC,EAAiB,SAACC,GAAD,MAAc,CAACC,KAAM,WAAYC,KAAMF,ICCxDG,EAAsB,SAACC,GAAD,MAAY,CAACH,KAAM,gBAAiBG,WAC1DC,EAAoB,SAACD,GAA2B,IAAnBE,IAAkB,yDACxD,8CAAO,WAAMC,GAAN,eAAAC,EAAA,sEACkBC,GAAcL,GADhC,UACGM,EADH,QAEiBA,EAAZC,QAFL,mBAICJ,EAASJ,EAAoBC,IACzBE,EALL,iDAMCM,IAAQD,QAAQ,wCANjB,2CAAP,uDCJSE,EAAqB,SAACX,GAAD,MAAU,CAACD,KAAM,kBAAmBC,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","file":"static/js/main.d37e9856.chunk.js","sourcesContent":["// console.log(process.env.NODE_ENV, 1111111111);\r\nexport const Avatoar_Generator = {\r\n    AvatarStyle: [\r\n        'Circle',\r\n        'Transparent',\r\n    ],\r\n    Top:[\r\n        \"NoHair\",\r\n        \"Eyepatch\",\r\n        \"Hat\",\r\n        \"Hijab\",\r\n        \"Turban\",\r\n        \"WinterHat1\",\r\n        \"WinterHat2\",\r\n        \"WinterHat3\",\r\n        \"WinterHat4\",\r\n        \"LongHairBigHair\",\r\n        \"LongHairBob\",\r\n        \"LongHairBun\",\r\n        \"LongHairCurly\",\r\n        \"LongHairCurvy\",\r\n        \"LongHairDreads\",\r\n        \"LongHairFrida\",\r\n        \"LongHairFro\",\r\n        \"LongHairFroBand\",\r\n        \"LongHairNotTooLong\",\r\n        \"LongHairShavedSides\",\r\n        \"LongHairMiaWallace\",\r\n        \"LongHairStraight\",\r\n        \"LongHairStraight2\",\r\n        \"LongHairStraightStrand\",\r\n        \"ShortHairDreads01\",\r\n        \"ShortHairDreads02\",\r\n        \"ShortHairFrizzle\",\r\n        \"ShortHairShaggyMullet\",\r\n        \"ShortHairShortCurly\",\r\n        \"ShortHairShortFlat\",\r\n        \"ShortHairShortRound\",\r\n        \"ShortHairShortWaved\",\r\n        \"ShortHairSides\",\r\n        \"ShortHairTheCaesar\",\r\n        \"ShortHairTheCaesarSidePart\"\r\n    ],\r\n    Accessories: [\r\n        \"Blank\",\r\n        \"Kurt\",\r\n        \"Prescription01\",\r\n        \"Prescription02\",\r\n        \"Round\",\r\n        \"Sunglasses\",\r\n        \"Wayfarers\"\r\n    ],\r\n    HairColor: [\r\n        \"Auburn\",\r\n        \"Black\",\r\n        \"Blonde\",\r\n        \"BlondeGolden\",\r\n        \"Brown\",\r\n        \"BrownDark\",\r\n        \"PastelPink\",\r\n        \"Platinum\",\r\n        \"Red\",\r\n        \"SilverGray\"\r\n    ],\r\n    FacialHair: [\r\n        \"Blank\",\r\n        \"BeardMedium\",\r\n        \"BeardLight\",\r\n        \"BeardMagestic\",\r\n        \"MoustacheFancy\",\r\n        \"MoustacheMagnum\"\r\n    ],\r\n    FacialHairColor: [\r\n        \"Auburn\",\r\n        \"Black\",\r\n        \"Blonde\",\r\n        \"BlondeGolden\",\r\n        \"Brown\",\r\n        \"BrownDark\",\r\n        \"Platinum\",\r\n        \"Red\"\r\n    ],\r\n    Cloth: [\r\n        \"BlazerShirt\",\r\n        \"BlazerSweater\",\r\n        \"CollarSweater\",\r\n        \"GraphicShirt\",\r\n        \"Hoodie\",\r\n        \"Overall\",\r\n        \"ShirtCrewNeck\",\r\n        \"ShirtScoopNeck\",\r\n        \"ShirtVNeck\"\r\n    ], \r\n    ClothColor: [\r\n        \"Black\",\r\n        \"Blue01\",\r\n        \"Blue02\",\r\n        \"Blue03\",\r\n        \"Gray01\",\r\n        \"Gray02\",\r\n        \"Heather\",\r\n        \"PastelBlue\",\r\n        \"PastelGreen\",\r\n        \"PastelOrange\",\r\n        \"PastelRed\",\r\n        \"PastelYellow\",\r\n        \"Pink\",\r\n        \"Red\",\r\n        \"White\"\r\n    ],\r\n    Eyes: [\r\n        \"Close\",\r\n        \"Cry\",\r\n        \"Default\",\r\n        \"Dizzy\",\r\n        \"EyeRoll\",\r\n        \"Happy\",\r\n        \"Hearts\",\r\n        \"Side\",\r\n        \"Squint\",\r\n        \"Surprised\",\r\n        \"Wink\",\r\n        \"WinkWacky\"\r\n    ],\r\n    Eyebrow: [\r\n        \"Angry\",\r\n        \"AngryNatural\",\r\n        \"Default\",\r\n        \"DefaultNatural\",\r\n        \"FlatNatural\",\r\n        \"RaisedExcited\",\r\n        \"RaisedExcitedNatural\",\r\n        \"SadConcerned\",\r\n        \"SadConcernedNatural\",\r\n        \"UnibrowNatural\",\r\n        \"UpDown\",\r\n        \"UpDownNatural\"\r\n    ],\r\n    Mouth: [\r\n        \"Concerned\",\r\n        \"Default\",\r\n        \"Disbelief\",\r\n        \"Eating\",\r\n        \"Grimace\",\r\n        \"Sad\",\r\n        \"ScreamOpen\",\r\n        \"Serious\",\r\n        \"Smile\",\r\n        \"Tongue\",\r\n        \"Twinkle\",\r\n        \"Vomit\"\r\n    ],\r\n    Skin: [\r\n        \"Tanned\",\r\n        \"Yellow\",\r\n        \"Pale\",\r\n        \"Light\",\r\n        \"Brown\",\r\n        \"DarkBrown\",\r\n        \"Black\"\r\n    ],\r\n    // GraphicType: [\r\n    //     \"Bat\",\r\n    //     \"Cumbia\",\r\n    //     \"Deer\",\r\n    //     \"Diamond\",\r\n    //     \"Hola\",\r\n    //     \"Pizza\",\r\n    //     \"Resist\",\r\n    //     \"Selena\",\r\n    //     \"Bear\",\r\n    //     \"SkullOutline\",\r\n    //     \"Skull\"\r\n    // ]\r\n}\r\n","export const updateGroupAction = (groupList)=> ({type: 'updateGroup', data: groupList})\r\nexport const deleteGroupAction = (converId)=> ({type: 'deleteGroup', data: converId})\r\nexport const addGroupAction = (groupObj)=> ({type: 'addGroup', data: groupObj})\r\n\r\n\r\nexport const updateSyncGroup = (option, showMsg = true)=> {\r\n    return async dispatch=> {\r\n    }\r\n}","import { message } from \"antd\"\r\nimport { updateAvatoar } from \"../../common/server\"\r\n\r\nexport const updateAvatoarAction = (option)=> ({type: 'changeAvatoar', option})\r\nexport const updateSyncAvatoar = (option, showMsg = true)=> {\r\n    return async dispatch=> {\r\n        const result = await updateAvatoar(option)\r\n        const { success } = result;\r\n        if(success) {\r\n            dispatch(updateAvatoarAction(option))\r\n            if(!showMsg) return;\r\n            message.success('修改头像成功')\r\n        }\r\n    }\r\n}","\r\nexport const appendConverAction = (data)=> ({type: 'appendNewConver', data})\r\nexport const updateChatDataAction = (data)=> ({type: 'updateChatData', data})\r\nexport const updateHistoryAction = (data)=> ({type: 'updateOneHistory', data})\r\n\r\n// 向数组里的history追加一个新的记录\r\nexport const syncAppendConverAction = (data)=> {\r\n\r\n    const UID = localStorage.getItem('uid');\r\n\r\n    const history = (data.history || []).map(cover=> ({\r\n        ...cover,\r\n        isMySelf: cover.talker === UID\r\n    }))\r\n    const lastHistory = {\r\n        ...data.lastHistory,\r\n        isMySelf: (data.lastHistory || {}).talker === UID,\r\n    }\r\n    \r\n    return async dispatch=> {\r\n        dispatch(appendConverAction({\r\n            ...data,\r\n            history,\r\n            lastHistory,\r\n        }))\r\n    }\r\n}\r\n\r\n// 更新聊天记录并自动识别发送者和接受者\r\nexport const syncUpdateChatDataAction = (data)=> {\r\n    const UID = localStorage.getItem('uid');\r\n\r\n    const mapData = data.map(item=> ({\r\n        ...item,\r\n        history: (item.history || []).map(cover=> ({\r\n            ...cover,\r\n            isMySelf: cover.talker === UID\r\n        }))\r\n    }))\r\n    return async dispatch=> {\r\n        dispatch(updateChatDataAction(mapData))\r\n    }\r\n}\r\n\r\nexport const syncUpdateHistoryAction = (data)=> {\r\n    const UID = localStorage.getItem('uid');\r\n    return async dispatch=> {\r\n        dispatch(updateHistoryAction({\r\n            converObj: {...data, isMySelf: data.talker === UID, lastHistory: data},\r\n            converId: data.converId,\r\n        }))\r\n    }\r\n}\r\n\r\n","function login(prevState = false, action) {\r\n    const { type } = action;\r\n    switch (type) {\r\n        case 'login':\r\n            return true;\r\n        case 'logout':\r\n            return false;\r\n        default:\r\n            return prevState;\r\n    }\r\n}\r\n\r\nexport default login;","const avatoar = (prevState = {}, action)=> {\r\n    const {type, option = {}} = action;\r\n    switch (type) {\r\n        case 'changeAvatoar':\r\n            let newState = {\r\n                ...prevState,\r\n                ...option,\r\n            }\r\n            return newState;\r\n        default:\r\n            return prevState;\r\n    }\r\n}\r\n\r\nexport default avatoar;\r\n","const userinfo = (prevState = {}, action)=> {\r\n    const {type, userInfo = {}} = action;\r\n    switch (type) {\r\n        case 'change':\r\n            let newState = {\r\n                ...prevState,\r\n                ...userInfo,\r\n            }\r\n            return newState;\r\n        default:\r\n            return prevState;\r\n    }\r\n}\r\n\r\nexport default userinfo;\r\n","const session = (prevState = [], action)=> {\r\n    const {type, data } = action;\r\n    switch (type) {\r\n        case 'deleteSession':\r\n            let newState = prevState.filter(item=> item.username !== data)\r\n            return newState;\r\n        case 'addSession':\r\n            return [data, ...prevState];\r\n        case 'updateSession': \r\n            return [...data];\r\n        default:\r\n            return prevState;\r\n    }\r\n}\r\n\r\nexport default session;\r\n","const linkman = (prevState = [], action)=> {\r\n    const {type, data } = action;\r\n    switch (type) {\r\n        case 'deleteLinkMan':\r\n            let newState = prevState.filter(item=> item.username !== data)\r\n            return newState;\r\n        case 'addLinkMan':\r\n            return [data, ...prevState];\r\n        case 'updateLinkMan': \r\n            return [...data];\r\n        default:\r\n            return prevState;\r\n    }\r\n}\r\n\r\nexport default linkman;\r\n","const novalidation = (prevState = [], action)=> {\r\n    const {type, data } = action;\r\n    switch (type) {\r\n        case 'deleteNova':\r\n            let newState = prevState.filter(item=> item.username !== data)\r\n            return newState;\r\n        case 'addNova':\r\n            return [data, ...prevState];\r\n        case 'updateNova': \r\n            return [...data];\r\n        default:\r\n            return prevState;\r\n    }\r\n}\r\n\r\nexport default novalidation;\r\n","// 当前选中人的聊天记录\r\nconst chatData = (prevState = [], action)=> {\r\n    const {type, data } = action;\r\n    switch (type) {\r\n        // 给聊天数组对应的会话追加一条聊天记录\r\n        case 'updateOneHistory':\r\n            const {converId, converObj = {}} = data;\r\n            let index = prevState.findIndex(item=>item._id === converId)\r\n            let targetObj = prevState[index] || {};\r\n            prevState[index] = {...targetObj, history: [...(targetObj.history || []), converObj], lastHistory: converObj};\r\n            return [...prevState];\r\n        // 给聊天数组追加一个新的会话\r\n        case 'appendNewConver':\r\n            return [\r\n                ...prevState,\r\n                data,\r\n            ];\r\n        case 'updateChatData':\r\n            return data\r\n        default:\r\n            return prevState;\r\n    }\r\n}\r\n\r\nexport default chatData;\r\n","const currentConverId = (prevState = '', action)=> {\r\n    const {type, currentConverId = ''} = action;\r\n    switch (type) {\r\n        case 'changeConverId':\r\n            return currentConverId;\r\n        default:\r\n            return prevState;\r\n    }\r\n}\r\n\r\nexport default currentConverId;\r\n","const groupList = (prevState = [], action)=> {\r\n    const {type, data } = action;\r\n    switch (type) {\r\n        case 'deleteGroup':\r\n            let newState = prevState.filter(item=> item._id !== data)\r\n            return newState;\r\n        case 'addGroup':\r\n            return [data, ...prevState];\r\n        case 'updateGroup': \r\n            return [...data];\r\n        default:\r\n            return prevState;\r\n    }\r\n}\r\n\r\nexport default groupList;\r\n","/* \r\n\t该文件用于汇总所有的reducer为一个总的reducer\r\n*/\r\n//引入combineReducers，用于汇总多个reducer\r\nimport {combineReducers} from 'redux'\r\nimport login from './login'\r\nimport avatoar from './avatoar'\r\nimport userInfo from './userinfo'\r\nimport session from './session'\r\nimport linkman from './linkman'\r\nimport navalidation from './novalidation'\r\nimport chatData from './currentChatData'\r\nimport converId from './converId'\r\nimport group from './group'\r\n\r\nexport default combineReducers({\r\n    login,\r\n    avatoar,\r\n    userInfo,\r\n    session,\r\n    linkman,\r\n    navalidation,\r\n    chatData,\r\n    converId,\r\n    group,\r\n})","import { createStore, applyMiddleware } from 'redux'\r\nimport reducers from './reduces'\r\nimport { persistStore, persistReducer } from 'redux-persist'\r\nimport storage from 'redux-persist/lib/storage' // defaults to localStorage for web\r\nimport thunk from 'redux-thunk';\r\nimport {composeWithDevTools} from 'redux-devtools-extension'\r\n\r\nconst persistConfig = {\r\n    key: 'root',\r\n    storage,\r\n    // blacklist: ['navigation'] // navigation不会被存入缓存中，其他会，适用于少部分数据需要实时更新\r\n    whitelist: ['userInfo', 'login', 'converId', 'chatData'] // 适用于大多数数据并不会实时从后台拿数据\r\n}\r\n\r\nconst persistedReducer = persistReducer(persistConfig, reducers)\r\nconst store = createStore(persistedReducer, composeWithDevTools(applyMiddleware(thunk)))\r\nconst persistor = persistStore(store)\r\n\r\nexport { store, persistor }\r\n","import { Avatoar_Generator } from '../common/global'\r\n\r\nexport const randomGenerator = ()=> {\r\n    let rowdomAvatoarObj = {};\r\n    for(let i in Avatoar_Generator) {\r\n        let arr = Avatoar_Generator[i]\r\n        const randomIndex = Math.floor(Math.random() * arr.length)\r\n        rowdomAvatoarObj[i] =arr[randomIndex]\r\n    } \r\n    return rowdomAvatoarObj;\r\n}","import axios from 'axios';\r\nimport { message } from 'antd';\r\n\r\nconst vq  = axios.create({\r\n    method: 'post',\r\n    timeout: 3000,\r\n    baseURL : process.env.NODE_ENV === 'production' ? 'http://localhost:7777' : 'http://localhost:3000'\r\n})\r\n\r\n// http request 拦截器 \r\nvq.interceptors.request.use(\r\n    config => {\r\n        const token = localStorage.getItem('token')\r\n        const uid = localStorage.getItem('uid')\r\n        if(process.env.NODE_ENV === 'production') {\r\n            config.url = config.url.replace(/\\/api/,'');\r\n        }\r\n        if (token) { // 判断是否存在token，如果存在的话，则每个http header都加上token\r\n            config.headers.authorization = token  //请求头加上token\r\n        }\r\n        if(uid) {\r\n            config.headers.uid = uid  //请求头每次带上uid\r\n        }\r\n        return config\r\n    },\r\n    err => {return Promise.reject(err)}\r\n )\r\n\r\n\r\n// http response 拦截器\r\nvq.interceptors.response.use(\r\n    response => {\r\n    //拦截响应，做统一处理 \r\n    if (!response.data.success) {\r\n       \r\n    }\r\n    return response.data;\r\n},\r\n    //接口错误状态处理，也就是说无响应时的处理 \r\n    error => {\r\n      const errorCode = (error.response || {}).status || 404\r\n      if(errorCode === 401) { \r\n        message.error('登陆状态失效，请重新登陆', 1, ()=>{\r\n            window.location.pathname = '/account'\r\n        })\r\n      }else{\r\n        message.error('网络不好，请联系管理员！')\r\n      }\r\n      return Promise.reject(errorCode) // 返回接口返回的错误信息\r\n})\r\n\r\n\r\nexport default vq;","import { message } from \"antd\";\r\nimport { addGroupAction } from \"../redux/actions/group\";\r\nimport { updateSyncAvatoar } from \"../redux/actions/avatoar\";\r\nimport { syncAppendConverAction } from \"../redux/actions/currentChatData\";\r\nimport {store} from \"../redux/store\";\r\nimport { randomGenerator } from \"./util\";\r\nimport vq from \"./vq\";\r\n\r\n// 设置用户是否在线\r\nexport async function setUserIsOnLine(isOnLine) {\r\n    return await vq('/api/users/setUserOnline', {\r\n        data: {\r\n            isOnLine,\r\n        }\r\n    })\r\n}\r\n\r\n\r\nexport async function userlogin(username, password) {\r\n    const result = await vq('/api/users/login', {\r\n        data: {\r\n          username,\r\n          password,\r\n        }\r\n    })\r\n    const { uid, token } =  result;\r\n    // 客户端存储token\r\n    localStorage.setItem('token', token)\r\n    localStorage.setItem('uid', uid)\r\n    store.dispatch({type: 'login'})\r\n    return result;\r\n}\r\n\r\n\r\n// 修改头像\r\nexport async function updateAvatoar(avatoar) {\r\n    return await vq('/api/users/avatoar', {\r\n        data: {\r\n            avatoar,\r\n        }\r\n    })\r\n}\r\n\r\n// 修改用户信息\r\nexport async function updateUserInfo(info) {\r\n    return await vq('/api/users/userinfo', {\r\n        data: {\r\n            ...info,\r\n        }\r\n    })\r\n}\r\n\r\n// 修改用户信息\r\nexport async function queryUserInfo() {\r\n     const result = await vq('/api/users/queryUser', {\r\n    })\r\n    localStorage.setItem('uid', result.uid);\r\n    return result;\r\n}\r\n\r\nexport async function userRegister(username, password, email) {\r\n    const randomAvatar = randomGenerator();\r\n    const result = await vq('/api/users/register', {\r\n        data: {username,\r\n               password,\r\n               email,\r\n               randomAvatar,\r\n            }\r\n    })\r\n    const { user, token, success } = result;\r\n    if(success) {\r\n        // 客户端存储token\r\n        localStorage.setItem('token', token)\r\n        localStorage.setItem('uid', user._id)\r\n        // 生成一个随机的形象。\r\n        store.dispatch(updateSyncAvatoar(randomAvatar, false))\r\n    }\r\n    return result;\r\n} \r\n\r\nexport async function fetchContactList() {\r\n    return await vq('/api/chat/contact', {\r\n\r\n    })\r\n}\r\n\r\nexport async function fetchChatHistoryData() {\r\n    return await vq('/api/chat/chatData', {\r\n\r\n    })\r\n}\r\n\r\n// 搜索对应联系人\r\nexport async function queryLinkMan(username) {\r\n    return await vq('/api/chat/queryLinkman', {\r\n        data: {\r\n            username,\r\n        }\r\n    })\r\n}\r\n\r\n// 添加联系人\r\nexport async function addLinkMan(username) {\r\n    return await vq('/api/chat/addLinkman', {\r\n        data: {\r\n            username,\r\n        }\r\n    })\r\n}\r\n\r\n\r\n// 拉群聊\r\nexport async function createGroup(usersList) {\r\n    const {success, message: msg, resultObj} =  await vq('/api/chat/createGroup', {\r\n        data: {\r\n            usersList,\r\n            nickname: store.getState().userInfo.nickname,\r\n        }\r\n    })\r\n    if(success) {\r\n        const {groupName, _id, members = []} = resultObj;\r\n        store.dispatch(addGroupAction({\r\n            groupName,\r\n            converId: _id,\r\n            size: members.length,\r\n        }))\r\n        store.dispatch(syncAppendConverAction(resultObj))\r\n        message.success(msg)\r\n    }else {\r\n        message.error(msg)\r\n    }\r\n    return success;\r\n}\r\n\r\n\r\n/**\r\n * \r\n * @param {Boolean} isAgree \r\n * @param {String} username \r\n * @returns \r\n */\r\n// 添加联系人\r\nexport async function respondAdd(username, isAgree) {\r\n    const { code, message: msg, converId, history} =  await vq('/api/users/respondAdd', {\r\n        data: {\r\n            isAgree,\r\n            username,\r\n        }\r\n    })\r\n    if(code === 'success') {\r\n        message.success(msg)\r\n    }else {\r\n        message.error(msg)\r\n    }\r\n    return {\r\n        converId,\r\n        history,\r\n    };\r\n}\r\n","import React from 'react'\r\nimport './index.css'\r\nimport LOGO from '../../assets/LOGO.png'\r\nimport   '../../common/global.js'\r\nimport { message, Input  } from 'antd';\r\nimport { userlogin, userRegister } from '../../common/server';\r\n\r\nexport default function Account(props) {\r\n    const [username, setUsername] = React.useState('')\r\n    const [password, setpassword] = React.useState('')\r\n    const [email, setemail] = React.useState('')\r\n    const [submitType, setSubmitType] = React.useState('login')\r\n\r\n\r\n    const info = (type, text) => {\r\n        message[type](text);\r\n    };\r\n    \r\n    async function onSubmit() { \r\n        if(submitType === 'login') {\r\n            if(!username || !password) {\r\n              info('error', '用户名密码不能为空！')\r\n              return;\r\n            }\r\n            try {\r\n                const { success } = await userlogin(username, password)\r\n                if(success) {\r\n                    info('success', '验证成功，正在前往VQ')            \r\n                    props.history.push('/chatroom')\r\n                }else {\r\n                    info('error', '身份验证失败，请核对账号密码')\r\n                }\r\n            } catch (error) {\r\n               \r\n            }\r\n           \r\n       }else if(submitType === 'register') {\r\n            if(!username || !password) {\r\n                info('error', '用户名密码邮箱不能为空！')\r\n                return;\r\n            }\r\n            const {success, message} = await userRegister(username, password, email)\r\n            if(success) {\r\n                info('success', '注册成功，正在前往VQ')\r\n                props.history.push('/chatroom')\r\n            }else {\r\n                info('error', message)\r\n            }\r\n       }\r\n    }\r\n\r\n    function onChangeInputValue(type, e) {\r\n        const value = e.target.value;\r\n        switch (type) {\r\n            case 'username':\r\n                setUsername(value)\r\n                break;\r\n            case 'password':\r\n                setpassword(value)\r\n                break; \r\n            case 'email':\r\n                setemail(value)\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    function onChangeSubmitType() {\r\n        const _submitType = submitType === 'login' ? 'register' : 'login'\r\n        setSubmitType(_submitType)\r\n    }\r\n\r\n    return (\r\n        <div className=\"limiter\">\r\n            <div className=\"container-login100\">\r\n                <div className=\"wrap-login100 p-t-85 p-b-20\">\r\n                    <div className=\"login100-form validate-form\">\r\n                        <span className=\"login100-form-title p-b-70\">\r\n                            欢迎使用\r\n                        </span>\r\n                        <span className=\"login100-form-avatar\">\r\n                            <img src={LOGO} alt='logo'/>\r\n                        </span>\r\n\r\n                        {/* 用户名 */}\r\n                        <div className=\"wrap-input100 validate-input m-t-85 m-b-35\" data-validate = \"Enter username\">\r\n                            <Input bordered={false} className=\"input100\" value={username} onChange={(e)=> onChangeInputValue('username', e)} type=\"text\"/>\r\n                            <span className=\"focus-input100\" data-placeholder={username ? '' : '用户名'}></span>\r\n                        </div>\r\n\r\n                        {/* 密码 */}\r\n                        <div className=\"wrap-input100 validate-input m-b-50\" data-validate=\"Enter password\">\r\n                            <Input bordered={false} className=\"input100\" value={password} onChange={(e)=> onChangeInputValue('password', e)} type=\"password\"/>\r\n                            <span className=\"focus-input100\" data-placeholder={password ? '' : '密码'}></span>\r\n                        </div>\r\n\r\n                        {/* 邮箱 */}\r\n                        {\r\n                            submitType === 'register' ? \r\n                            <div className=\"wrap-input100 validate-input m-b-50\" data-validate=\"Enter password\">\r\n                            <Input bordered={false} className=\"input100\"  value={email} onChange={(e)=> onChangeInputValue('email', e)} type=\"email\"/>\r\n                            <span className=\"focus-input100\" data-placeholder={email ? '' : '邮箱'}></span>\r\n                           </div>\r\n                           : \r\n                           null\r\n                        }\r\n\r\n                        <div className=\"container-login100-form-btn\">\r\n                            <button className=\"login100-form-btn\" onClick={onSubmit}>\r\n                                 {submitType === 'login' ? '登录' : '注册'}   \r\n                            </button>\r\n                        </div>\r\n                        <div className=\"login-padding\"></div>\r\n                        <ul className=\"login-more\">\r\n                            <li className=\"m-b-8\">\r\n                                <span className=\"txt2\">\r\n                                忘记密码\r\n                                </span>\r\n                            </li>\r\n\r\n                            <li>\r\n                                <span className=\"txt1\">\r\n                                   没有账号？\r\n                                </span>\r\n\r\n                                <span onClick={()=> onChangeSubmitType()} className=\"txt2\">\r\n                                    {submitType === 'login' ? '注册' : '登录'}   \r\n                                </span>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","export default \"data:image/png;base64,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\"","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport AvatarRaw from 'avataaars'\r\nimport './index.less'\r\n\r\n\r\n\r\nfunction Avatar(props) {\r\n    const { option = {}, size = 'small' } = props;\r\n    const style = {}\r\n    \r\n    switch (size) {\r\n        case 'small':\r\n            style.width = '50px'\r\n            break;\r\n        case 'large':\r\n            style.width = '100px'\r\n            break;\r\n        case 'minuteness':\r\n            style.width = '40px'\r\n            break;\r\n        default:\r\n            style.width = '50px'\r\n            break;\r\n    }\r\n\r\n    return (\r\n        <div className=\"c-atr\" style={style}>\r\n            <AvatarRaw \r\n            avatarStyle={option.AvatarStyle}\r\n            topType= {option.Top}\r\n            accessoriesType= {option.Accessories}\r\n            hairColor= {option.HairColor}\r\n            facialHairType={option.FacialHair}\r\n            facialHairColor= {option.FacialHairColor}\r\n            clotheType= {option.Cloth}\r\n            clotheColor= {option.ClothColor}\r\n            eyeType= {option.Eyes}\r\n            eyebrowType= {option.Eyebrow}\r\n            mouthType= {option.Mouth}\r\n            skinColor= {option.Skin} \r\n            graphicType={option.GraphicType}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nAvatar.propTypes = {\r\n    option: PropTypes.object,\r\n    small: PropTypes.string,\r\n}\r\n\r\nexport default Avatar\r\n\r\n","import React from 'react'\r\nimport { Popover } from 'antd';\r\nimport './index.less'\r\nimport {store} from '../../../../redux/store';\r\nimport { connect } from 'react-redux';\r\nimport Avatar from '../../../../components/baseUi/Avatar.js';\r\n\r\nfunction Header(props) {\r\n    const [popoverVisible, setPopoverVisible] = React.useState(false)\r\n    const { option, userInfo } = props;\r\n    function onTabPerson() {\r\n        setPopoverVisible(!popoverVisible)\r\n        props.onSwitchDrawer()\r\n    }\r\n    const menu = (\r\n        <div className=\"c-header__more-menu\">\r\n          <p onClick={onTabPerson}>个人资料</p>\r\n          <p>黑暗模式</p>\r\n          <p onClick={onClickLogout}>注销</p>\r\n        </div>\r\n      );\r\n    \r\n    function onClickLogout() {\r\n        setPopoverVisible(!popoverVisible)\r\n        store.dispatch({type: 'logout'})\r\n        localStorage.clear()\r\n    }\r\n    return (\r\n        <div className=\"c-header\">\r\n            <div onClick={onTabPerson} className=\"c-header__avatar\">\r\n                <Avatar option={option} size=\"small\"/>\r\n            </div>\r\n            <div className=\"c-header__name\">\r\n                {userInfo.nickname}\r\n            </div>\r\n            <Popover placement=\"bottomRight\" content={menu}>\r\n                <div className=\"c-header__more\">\r\n                    <li></li>\r\n                    <li></li>\r\n                    <li></li>\r\n                </div>\r\n            </Popover>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (store)=> {\r\n        return {\r\n        login: store.login,\r\n        option: store.avatoar,\r\n        userInfo: store.userInfo,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header) ","import { message } from \"antd\"\r\nimport { updateUserInfo } from \"../../common/server\"\r\n\r\nexport const updateUserInfoAction = (userInfo)=> ({type: 'change', userInfo})\r\nexport const updateSyncUserInfo = (userInfo)=> {\r\n        return async dispatch=> {\r\n        const result = await updateUserInfo(userInfo)\r\n        const { success } = result;\r\n        if(success) {\r\n            message.success('修改用户信息成功')\r\n            dispatch(updateUserInfoAction(userInfo))\r\n        }\r\n    }\r\n}","export const AVATOAR_MAP = {\r\n    AvatarStyle: '背景',\r\n    Top: '头部',\r\n    Accessories: '眼饰',\r\n    HairColor: '发色',\r\n    FacialHair: '胡子',\r\n    FacialHairColor: '胡子颜色',\r\n    Cloth: '衣服', \r\n    ClothColor: '衣服颜色',\r\n    Eyes: '眼睛',\r\n    Eyebrow: '眉毛',\r\n    Mouth: '嘴巴',\r\n    Skin: '皮肤',\r\n}\r\n\r\nexport const OPTION_MAP = {\r\n    'Circle': '有色',\r\n    'Transparent': '透明',\r\n    \"NoHair\": '光头',\r\n    \"Eyepatch\": '眼罩',\r\n    \"Hat\": '帽子',\r\n    \"Hijab\": '头巾1',\r\n    \"Turban\": '头巾2',\r\n    \"WinterHat1\": '冬帽1',\r\n    \"WinterHat2\": '冬帽2',\r\n    \"WinterHat3\": '冬帽3',\r\n    \"WinterHat4\": '冬帽4',\r\n    \"LongHairBigHair\": '长发1',\r\n    \"LongHairBob\": '长发2',\r\n    \"LongHairBun\": '长发3',\r\n    \"LongHairCurly\": '长发4',\r\n    \"LongHairCurvy\": '长发5',\r\n    \"LongHairDreads\": '长发6',\r\n    \"LongHairFrida\": '长发7',\r\n    \"LongHairFro\": '长发8',\r\n    \"LongHairFroBand\": '长发9',\r\n    \"LongHairNotTooLong\": '长发10',\r\n    \"LongHairShavedSides\": '长发11',\r\n    \"LongHairMiaWallace\": '长发12',\r\n    \"LongHairStraight\": '长发13',\r\n    \"LongHairStraight2\": '长发14',\r\n    \"LongHairStraightStrand\": '长发15',\r\n    \"ShortHairDreads01\": '短发1',\r\n    \"ShortHairDreads02\": '短发2',\r\n    \"ShortHairFrizzle\": '短发3',\r\n    \"ShortHairShaggyMullet\": '短发4',\r\n    \"ShortHairShortCurly\": '短发5',\r\n    \"ShortHairShortFlat\": '短发6',\r\n    \"ShortHairShortRound\": '短发7',\r\n    \"ShortHairShortWaved\": '短发8',\r\n    \"ShortHairSides\": '短发9',\r\n    \"ShortHairTheCaesar\": '短发10',\r\n    \"ShortHairTheCaesarSidePart\": '短发11',\r\n    \"Blank\": '无',\r\n    \"Kurt\": \"墨镜\",\r\n    \"Prescription01\": '白框眼镜',\r\n    \"Prescription02\": '黑框眼镜',\r\n    \"Round\": '圆框眼镜',\r\n    \"Sunglasses\": '太阳镜1',\r\n    \"Wayfarers\": '太阳镜2',\r\n    \"Auburn\": '棕色',\r\n    \"Black\": '黑色',\r\n    \"Blonde\": '亚麻色',\r\n    \"BlondeGolden\": '亚麻金',\r\n    \"Brown\": '褐色',\r\n    \"BrownDark\": '深褐',\r\n    \"PastelPink\": '淡粉',\r\n    \"Platinum\": '白金',\r\n    \"Red\": '红',\r\n    \"SilverGray\": '银灰',\r\n    \"BeardMedium\": '胡子1',\r\n    \"BeardLight\": '胡子2',\r\n    \"BeardMagestic\": '胡子3',\r\n    \"MoustacheFancy\": '胡子4',\r\n    \"MoustacheMagnum\": '胡子5',\r\n    \"BlazerShirt\": '短T1', \r\n    \"BlazerSweater\": '毛衣1', \r\n    \"CollarSweater\": '毛衣2', \r\n    \"GraphicShirt\": '短T2', \r\n    \"Hoodie\": '连帽衫',\r\n    \"Overall\": '工装',\r\n    \"ShirtCrewNeck\": '短T3',\r\n    \"ShirtScoopNeck\": '短T4',\r\n    \"ShirtVNeck\": 'V领',\r\n    \"Blue01\": '蓝1',\r\n    \"Blue02\": '蓝2',\r\n    \"Blue03\": '蓝3',\r\n    \"Gray01\": '灰1',\r\n    \"Gray02\": '灰2',\r\n    \"Heather\": '灰3',\r\n    \"PastelBlue\": '浅蓝',\r\n    \"PastelGreen\": '浅绿',\r\n    \"PastelOrange\": '浅橘',\r\n    \"PastelRed\": '浅红',\r\n    \"PastelYellow\": '浅黄',\r\n    \"Pink\": '粉色',\r\n    \"White\": '白色',\r\n    \"Close\": '闭眼',\r\n    \"Cry\": '哭',\r\n    \"Default\": '默认',\r\n    \"Dizzy\": 'xx',\r\n    \"EyeRoll\": '白眼',\r\n    \"Happy\": '开心',\r\n    \"Hearts\": '心心',\r\n    \"Side\": '斜眼',\r\n    \"Squint\": '瞪眼',\r\n    \"Surprised\": '惊讶',\r\n    \"Wink\": '眨眼1',\r\n    \"WinkWacky\": '眨眼2',\r\n    \"Angry\": '生气1',\r\n    \"AngryNatural\": '生气2',\r\n    \"DefaultNatural\": '自然',\r\n    \"FlatNatural\": '横眉',\r\n    \"RaisedExcited\": '兴奋1',\r\n    \"RaisedExcitedNatural\": '兴奋2',\r\n    \"SadConcerned\": '难过1',\r\n    \"SadConcernedNatural\": '难过2',\r\n    \"UnibrowNatural\": '一字眉',\r\n    \"UpDown\": '高低眉1',\r\n    \"UpDownNatural\": '高低眉2',\r\n    \"Concerned\": '担心',\r\n    \"Disbelief\": '怀疑',\r\n    \"Eating\": '吃吃',\r\n    \"Grimace\": '呲牙',\r\n    \"Sad\": '伤心',\r\n    \"ScreamOpen\": '很伤心',\r\n    \"Serious\": '严肃',\r\n    \"Smile\": '微笑',\r\n    \"Tongue\": '伸舌头',\r\n    \"Twinkle\": '抿嘴',\r\n    \"Vomit\": '吐了',\r\n    \"Tanned\": '棕褐色',\r\n    \"Yellow\": '黄色',\r\n    \"Pale\": '苍白',\r\n    \"Light\": '亮色',\r\n    \"DarkBrown\": '深棕',\r\n}","import React, { Fragment } from 'react'\r\nimport {Avatoar_Generator} from '../../../../common/global'\r\nimport { AVATOAR_MAP, OPTION_MAP } from '../../../../common/avatoar_map';\r\nimport {  Select, Button } from 'antd';\r\nimport './index.less'\r\n\r\nexport default function ChangeAvatar(props) {\r\n    const { optionCopy, resetOption, submitOption, changeOptionFn, backFn } = props;\r\n\r\n    return (\r\n        <Fragment>\r\n            <div className=\"c-ca__content\">\r\n                {\r\n                    Object.keys(Avatoar_Generator).map((item, index)=> (\r\n                     <label key={index}>\r\n                        <span>{AVATOAR_MAP[item]}</span>\r\n                        <Select value={optionCopy[item]} style={{ width: 120 }} onChange={(value)=> changeOptionFn(item, value)}>\r\n                            {\r\n                               Avatoar_Generator[item].map((option, index)=> (\r\n                                    <Select.Option key={index} value={option}>{OPTION_MAP[option]}</Select.Option>\r\n                                ))\r\n                            }\r\n                        </Select>\r\n                     </label>\r\n                    ))\r\n                }\r\n             </div>\r\n            <div className=\"c-ca__btns\">\r\n                <Button className=\"c-ca__btns-back\" onClick={backFn}>返回</Button>\r\n                <Button className=\"c-ca__btns-back\" onClick={resetOption}>清空</Button>\r\n                <Button className=\"c-ca__btns-save\" onClick={submitOption} type=\"primary\">保存</Button>\r\n            </div>\r\n        </Fragment>\r\n        \r\n    )\r\n}\r\n","import React from 'react'\r\nimport Avatar from '../baseUi/Avatar.js'\r\nimport './index.less'\r\nimport moment from 'moment'\r\nimport \"moment/locale/zh-cn\";\r\nmoment.locale(\"zh-cn\");\r\n\r\nfunction Home(props) {\r\n    const { option, userInfo } = props;\r\n    const lastLoginTime = moment(userInfo.lastLoginTime).startOf('hour').fromNow();\r\n\r\n    return (\r\n        <div className=\"c-home\">\r\n            <div className=\"c-home__header\">好友资料</div>\r\n            <div className=\"c-home__body\">\r\n                <div className=\"c-home__body-avatar\">\r\n                    <Avatar option={option} size=\"large\"></Avatar>\r\n                </div>\r\n                <div className=\"c-home__body-content\">\r\n                    <label className=\"c-home__body-content-wrap\">\r\n                        <div className=\"c-home__body-content-key\">呢称：</div>\r\n                        <div className=\"c-home__body-content-value\">{userInfo.nickname}</div>\r\n                    </label>\r\n                    <label className=\"c-home__body-content-wrap\">\r\n                        <div className=\"c-home__body-content-key\">邮箱：</div>\r\n                        <div className=\"c-home__body-content-value\">{userInfo.email}</div>\r\n                    </label>\r\n                    <label className=\"c-home__body-content-wrap\">\r\n                        <div className=\"c-home__body-content-key\">性别：</div>\r\n                        <div className=\"c-home__body-content-value\">{userInfo.sex === 1? '男' : '女'}</div>\r\n                    </label>\r\n                    <label className=\"c-home__body-content-wrap\">\r\n                        <div className=\"c-home__body-content-key\">签名：</div>\r\n                        <div className=\"c-home__body-content-value\">{userInfo.signature || '该用户很懒，还没有填写个性签名'}</div>\r\n                    </label>\r\n                    <label className=\"c-home__body-content-wrap\">\r\n                        <div className=\"c-home__body-content-key\">{userInfo.isOnLine ? '当前状态：': '上次登陆：'}</div>\r\n                        <div className=\"c-home__body-content-value\">{userInfo.isOnLine ? '在线' : lastLoginTime}</div>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div> \r\n    )\r\n}\r\n\r\nexport default Home\r\n","import React, { Fragment } from 'react'\r\nimport './index.less'\r\nimport { connect } from 'react-redux';\r\nimport { randomGenerator } from '../../../../common/util';\r\nimport { updateAvatoarAction, updateSyncAvatoar} from '../../../../redux/actions/avatoar';\r\nimport {  updateUserInfoAction, updateSyncUserInfo } from '../../../../redux/actions/userinfo';\r\nimport ChangeAvatar from '../ChangeAvatar/index'\r\nimport { Form, Input, Button, Radio, message } from 'antd';\r\nimport { store } from '../../../../redux/store';\r\nimport PropTypes from 'prop-types'\r\nimport Home from '../../../../components/Home';\r\nimport Avatar from '../../../../components/baseUi/Avatar.js';\r\n\r\nconst layout = {\r\n  labelCol: {\r\n    span: 8,\r\n  },\r\n  wrapperCol: {\r\n    span: 16,\r\n  },\r\n};\r\nconst tailLayout = {\r\n  wrapperCol: {\r\n    offset: 8,\r\n    span: 16,\r\n  },\r\n};\r\n\r\n\r\n\r\nfunction Space(props) {\r\n    const { updateAvatoarAction, onClose, userInfo, type = 'home' } = props;\r\n    const { avatoar: option } = userInfo;\r\n    \r\n    const onFinish = async (values) => {\r\n        const {email, radio: sex, username: nickname, signature } = values;\r\n        const obj = {\r\n            email,\r\n            sex,\r\n            nickname,\r\n            signature,\r\n        }\r\n        if(!email) delete obj.email;\r\n        if(!sex) delete obj.radio;\r\n        if(!nickname) delete obj.nickname;\r\n        if(!signature) delete obj.signature;\r\n        store.dispatch(updateSyncUserInfo(obj))\r\n        onClose()\r\n      };\r\n      const onFinishFailed = (errorInfo) => {\r\n        message.error('填写资料错误')\r\n      };\r\n\r\n    const [optionCopy, setOptionCopy] = React.useState(option || {});\r\n    // 是否显示修改头像组件\r\n    const [ showAvatorOption, setShowAvatorOption] = React.useState(false);\r\n\r\n    function randomGeneratorAvator() {\r\n        if(!showAvatorOption) {\r\n            setShowAvatorOption(!showAvatorOption)\r\n            return\r\n        };\r\n        setOptionCopy(randomGenerator())\r\n    }\r\n\r\n    function changeOptionFn(key, value) {\r\n        setOptionCopy({\r\n            ...optionCopy,\r\n            [key]: value,\r\n        })\r\n    }\r\n\r\n    function resetOption() {\r\n        setOptionCopy(option)\r\n    }\r\n\r\n    function submitOption() {\r\n        store.dispatch(updateSyncAvatoar(optionCopy))\r\n        updateAvatoarAction(optionCopy);\r\n        onClose()\r\n    }\r\n    \r\n    function back() {\r\n        setShowAvatorOption(false)\r\n        resetOption()\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n           {\r\n               type === 'update' ?\r\n               <div className=\"c-chat-space\">\r\n                  <div className=\"c-chat-space__avatar\">\r\n                        <Avatar option={optionCopy || {}} size=\"large\"/>\r\n                        {\r\n                            type === 'update' ? \r\n                            showAvatorOption ? \r\n                            <Button type=\"link\" onClick={randomGeneratorAvator} size={20} className=\"c-chat-space__avatar-reset\">\r\n                            随机形象\r\n                            </Button>\r\n                            :  \r\n                            <Button type=\"link\" onClick={()=> setShowAvatorOption(true)}  size={20} className=\"c-chat-space__avatar-edit\">\r\n                            编辑形象\r\n                            </Button>\r\n                            :\r\n                            null\r\n                        }\r\n                    </div>\r\n                  <div className=\"c-chat-space__ca\">\r\n                    {\r\n                        showAvatorOption ?\r\n                        <ChangeAvatar \r\n                        optionCopy={optionCopy}\r\n                        resetOption={resetOption} \r\n                        submitOption={submitOption} \r\n                        changeOptionFn={changeOptionFn}\r\n                        backFn={back} />\r\n                        :\r\n                        <div className=\"c-chat-space__form\">\r\n                            <Form\r\n                            {...layout}\r\n                            name=\"basic\"\r\n                            initialValues={{\r\n                                 username: userInfo.nickname,\r\n                                 email: userInfo.email,\r\n                                 radio: userInfo.sex,\r\n                                 signature: userInfo.signature,\r\n                            }}\r\n                            onFinish={onFinish}\r\n                            onFinishFailed={onFinishFailed}\r\n                            >\r\n                            <Form.Item\r\n                                label=\"昵称\"\r\n                                name=\"username\"\r\n                            >\r\n                                <Input />\r\n                            </Form.Item>\r\n                            <Form.Item\r\n                                label=\"邮箱\"\r\n                                name=\"email\"\r\n                                rules={[{ type: 'email',message: '不是有效邮箱' }]}\r\n                                >\r\n                                <Input/>\r\n                            </Form.Item>\r\n                            <Form.Item\r\n                                label=\"个性签名\"\r\n                                name=\"signature\"\r\n                                >\r\n                                <Input.TextArea />\r\n                            </Form.Item>\r\n                            <Form.Item name=\"radio\" label=\"性别\">\r\n                                <Radio.Group>\r\n                                    <Radio value=\"1\">男</Radio>\r\n                                    <Radio value=\"2\">女</Radio>\r\n                                </Radio.Group>\r\n                            </Form.Item>\r\n                            <Form.Item {...tailLayout}>\r\n                                <Button type=\"primary\" htmlType=\"submit\">\r\n                                    提交修改\r\n                                </Button>\r\n                            </Form.Item>\r\n                            </Form>\r\n                    \r\n                        </div>\r\n                        }\r\n                    </div>\r\n               </div>\r\n               :\r\n               <Home userInfo={userInfo} option={option || {}}/>\r\n                 }\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (store)=> {\r\n    return {\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    updateAvatoarAction,\r\n    updateSyncAvatoar,\r\n    updateUserInfoAction,\r\n    updateSyncUserInfo,\r\n}\r\n\r\n// const mapDispatchToProps = (dispatch)=> {\r\n//     return {\r\n//         changeAvatar: (option)=> {\r\n//             dispatch(updateAvatoarAction(option))\r\n//         }\r\n//     }\r\n// }\r\n\r\nSpace.propTypes = {\r\n    type: PropTypes.string,\r\n    onClose: PropTypes.func,\r\n    userInfo: PropTypes.object,\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Space)\r\n\r\n","export const updateSessionAction = (sessionList)=> ({type: 'updateSession', data: sessionList})\r\nexport const deleteSessionAction = (username)=> ({type: 'deleteSession', data: username})\r\nexport const addSessionAction = (sessionObj)=> ({type: 'addSession', data: sessionObj})\r\n\r\n\r\nexport const updateSyncSession = (option, showMsg = true)=> {\r\n    return async dispatch=> {\r\n        // const result = await updateSession(option)\r\n        // const { success } = result;\r\n        // if(success) {\r\n        //     dispatch(updateSessionAction(option))\r\n        //     if(!showMsg) return;\r\n        //     message.success('修改头像成功')\r\n        // }\r\n    }\r\n}","export const updateLinkmanAction = (linkManList)=> ({type: 'updateLinkMan', data: linkManList})\r\nexport const deleteLinkmanAction = (username)=> ({type: 'deleteLinkMan', data: username})\r\nexport const addLinkmanAction = (linkManObj)=> ({type: 'addLinkMan', data: linkManObj})\r\n\r\n\r\nexport const updateSyncLinkman = (option, showMsg = true)=> {\r\n    return async dispatch=> {\r\n        // const result = await updateSession(option)\r\n        // const { success } = result;\r\n        // if(success) {\r\n        //     dispatch(updateSessionAction(option))\r\n        //     if(!showMsg) return;\r\n        //     message.success('修改头像成功')\r\n        // }\r\n    }\r\n}","import { respondAdd } from \"../../common/server\"\r\nimport { addLinkmanAction } from \"./linkman\"\r\nimport { addSessionAction } from \"./session\"\r\nimport { SmileOutlined } from '@ant-design/icons';\r\nimport { notification } from 'antd';\r\nimport { syncAppendConverAction } from \"./currentChatData\";\r\n\r\nexport const updateValidaAction = (validaList)=> ({type: 'updateNova', data: validaList})\r\nexport const deleteValidaAction = (username)=> ({type: 'deleteNova', data: username})\r\nexport const addValidaAction = (validaObj)=> ({type: 'addNova', data: validaObj})\r\n\r\n\r\nexport const respondAddPerson = (data, isAgree = false)=> {\r\n    return async dispatch=> {\r\n        const { username } = data;\r\n        const {converId, history} =await respondAdd(username, isAgree);\r\n        if(isAgree) {\r\n            dispatch(addLinkmanAction({...data, converId}))\r\n            dispatch(addSessionAction({...data, converId}))\r\n            dispatch(syncAppendConverAction(history))\r\n        }\r\n        dispatch(deleteValidaAction(username));\r\n    }\r\n}\r\n\r\nexport const asyncAddValidaList = (data)=> {\r\n    notification.open({\r\n        message: '您有一条新的好友请求',\r\n        description: <div> {`${data.nickname} ：hello，最近过得怎么样`}</div>,\r\n        icon: <SmileOutlined style={{ color: 'green ' }} />,\r\n      });\r\n    return async dispatch=> {\r\n        dispatch(addValidaAction(data))\r\n    }\r\n}\r\n\r\n\r\n","\r\nexport const updateCurrentConverId = (currentConverId)=> ({type: 'changeConverId', currentConverId})\r\n","import React, { Fragment } from 'react'\r\nimport { Spin } from 'antd';\r\nimport './index.less'\r\n\r\nfunction FullLoading(props) {\r\n    const { children, pageStatus } = props;\r\n    return (\r\n        <Fragment>\r\n            {\r\n                pageStatus?\r\n                children\r\n                :\r\n                <div className=\"c-fl\">\r\n                    <Spin tip=\"Loading...\" size=\"large\" />\r\n                </div>\r\n            }\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default FullLoading\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport './index.less'\r\nimport Avatar from '../baseUi/Avatar.js';\r\nimport { Button, message } from 'antd';\r\nimport { addLinkMan } from '../../common/server';\r\nimport { connect } from 'react-redux';\r\nimport { respondAddPerson } from '../../redux/actions/novalidation'\r\nimport { updateCurrentConverId } from '../../redux/actions/converId'\r\nimport { Checkbox } from 'antd';\r\nimport moment from 'moment'\r\nimport \"moment/locale/zh-cn\";\r\nmoment.locale(\"zh-cn\");\r\n\r\nfunction ChatItem(props) {\r\n    let { \r\n        data = {}, \r\n        type,\r\n        respondAddPerson, \r\n        chatData, \r\n        isSelected, \r\n        updateCurrentConverId \r\n    } = props;\r\n    const lastLoginTime = moment(data.lastLoginTime).startOf('hour').fromNow() + '在线'\r\n    // moment(date, 'YYYY-MM-DD h:mm:ss').fromNow()\r\n    async function respondAddFn(isAgree) {\r\n        respondAddPerson(data, isAgree)\r\n    }\r\n\r\n    async function onClickAddLinkMan(data) {\r\n        const { username } = data;\r\n        const result = await addLinkMan(username)\r\n        const { success, message : msg } = result;\r\n        if(success) {\r\n            message.success('发送好友验证成功')\r\n        }else {\r\n            message.error(msg)\r\n        }\r\n    }\r\n\r\n    function onClickItem() {\r\n        if(type === 'session') {\r\n            updateCurrentConverId(data.converId)\r\n        }\r\n    }\r\n\r\n    const currentChatData = React.useMemo(()=> {\r\n        let _chatData = chatData.find(item=> item._id === data.converId) || {}\r\n        return (_chatData.lastHistory || {}).content;\r\n    }, [chatData, data])\r\n\r\n    return (\r\n        <li className={`c-item ${isSelected ? 'c-item_active' : ''}`} data-chat=\"person2\" onClick={onClickItem}>\r\n            {\r\n                type === 'session' ?\r\n                <div className=\"c-item__session\">\r\n                    <Avatar option={data.avatoar || {}} size='small'/>\r\n                    <div className=\"c-item__session-main\">\r\n                        <span className=\"c-item__session-name\">{data.nickname}</span>\r\n                        <span className=\"c-item__session-preview\">{currentChatData}</span>\r\n                    </div>\r\n                    <div className=\"c-item__session-time\">{data.isOnLine ? '在线' : lastLoginTime}</div>\r\n                </div>\r\n                :\r\n                null\r\n            }\r\n            {\r\n                type === 'search' ?\r\n                <div className=\"c-item__session\">\r\n                    <Avatar option={data.avatoar || {}} size='small'/>\r\n                    <div className=\"c-item__session-main\">\r\n                        <span className=\"c-item__session-name\">{data.nickname}</span>\r\n                        <span className=\"c-item__session-preview\">{data.isOnLine ? '在线' : lastLoginTime}</span>\r\n                        </div>\r\n                        <div className=\"c-item__list-add\" onClick={()=> onClickAddLinkMan(data)}><span>添加</span></div>\r\n                    </div>\r\n                    :\r\n                null\r\n            }\r\n            {\r\n                type === 'group' ?\r\n                <div className=\"c-item__session\">\r\n                    <Avatar option={data.avatoar || {}} size='small'/>\r\n                    <div className=\"c-item__session-main\">\r\n                        <span className=\"c-item__session-name\">{data.nickname}</span>\r\n                        <span className=\"c-item__session-preview\">{data.isOnLine ? '在线' : lastLoginTime}</span>\r\n                        </div>\r\n                        <div className=\"c-item__group-checkbox\">\r\n                          <Checkbox checked={data.checked} onChange={()=>{}}></Checkbox>\r\n                        </div>\r\n                    </div>\r\n                    :\r\n                null\r\n            }\r\n            {\r\n                 type === 'validation' ?\r\n                 <div key={data.nickname} className=\"c-item__validation\">\r\n                      <div className=\"c-item__validation-icon\">\r\n                          <Avatar option={data.avatoar || {}}/>\r\n                      </div>\r\n                      <div className=\"c-item__validation-wrap\">\r\n                          <span className=\"c-item__session-name\">{data.nickname}</span>\r\n                          <span className=\"c-item__session-preview\">请求添加您为好友</span>\r\n                      </div>\r\n                      <div className=\"c-item__validation-btns\">\r\n                        <Button onClick={()=> respondAddFn(true)} className=\"c-item__validation-btns-agree\" type=\"primary\" size='small'>同意</Button>\r\n                        <Button onClick={()=> respondAddFn(false)} className=\"c-item__validation-btns-refuse\" size='small'>拒绝</Button>\r\n                      </div>\r\n                 </div>\r\n                 :\r\n                 null\r\n            }\r\n            {\r\n                type === 'linkman' ?\r\n                <div className=\"c-item__session\">\r\n                    <Avatar option={data.avatoar || {}}/>\r\n                    <div className=\"c-item__session-main\">\r\n                        <span className=\"c-item__session-name\">{data.nickname}</span>\r\n                        <span className=\"c-item__session-preview\">{data.signature}</span>\r\n                    </div>\r\n                    {/* <div className=\"c-item__session-time\">{data.time}</div> */}\r\n                </div>\r\n                :\r\n                null\r\n            }\r\n        </li>\r\n    )\r\n}\r\n\r\nChatItem.propTypes = {\r\n    type: PropTypes.string,\r\n    data: PropTypes.object,\r\n    isSelected: PropTypes.bool,\r\n}\r\n\r\nexport default connect((store)=> {\r\n    return {\r\n        chatData: store.chatData,\r\n        converId: store.converId,\r\n    }\r\n}, {\r\n    respondAddPerson,\r\n    updateCurrentConverId,\r\n})(ChatItem)\r\n\r\n","import React, { Fragment } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport ChatItem from '../../../../components/ChatItem';\r\n\r\nfunction Session(props) {\r\n    const { contactData = [], converId } = props;\r\n    return (\r\n        <Fragment>\r\n             {\r\n                contactData.map(item=> {\r\n                    return (\r\n                        <div key={item.username}>\r\n                          <ChatItem isSelected={converId === item.converId} key={item.username} type=\"session\" data={item}></ChatItem>\r\n                        </div>\r\n                    )\r\n                })\r\n            }\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(store=> ({\r\n    converId: store.converId,\r\n}))(Session)\r\n","import React from 'react'\r\n\r\n// 提供给子组件item组件一个改变rightType值得方法。 因为跨了很多层级，所以用context\r\nconst chatContext = React.createContext()\r\n\r\nexport {\r\n    chatContext,\r\n}","import { Modal, Input } from 'antd'\r\nimport React from 'react'\r\nimport ChatItem from '../ChatItem';\r\n\r\nconst { Search } = Input;\r\n\r\n\r\nfunction ChatModel(props) {\r\n    const { \r\n        isModalVisible,\r\n        handleCancel,\r\n        queryList = [],\r\n        onSearch = ()=> {},\r\n        title,\r\n        type,\r\n        onTabItem,\r\n        submit = ()=> {console.log(123123)},\r\n    } = props;\r\n    const [inputValue, setInputValue] = React.useState('')\r\n\r\n    const memoList = React.useMemo(()=> {\r\n        return queryList.filter(item=> (item.nickname || '').includes(inputValue))\r\n    }, [inputValue, queryList])\r\n    \r\n   function onChange(e) {\r\n        setInputValue(e.target.value)\r\n   }\r\n\r\n    return (\r\n        <Modal \r\n                visible={isModalVisible} \r\n                onCancel={handleCancel}\r\n                onOk={submit}\r\n                keyboard={true}\r\n                title= {title}\r\n                wrapClassName=\"c-lm__model\"\r\n                cancelText='取消'\r\n                okText='完成' \r\n                closable={false}\r\n            >\r\n                <div className=\"c-lm__model-search\">\r\n                    {\r\n                        type === 'search' ?\r\n                        <Search\r\n                        placeholder=\"查找联系人\"\r\n                        allowClear\r\n                        enterButton=\"查找\"\r\n                        size=\"large\"\r\n                        onSearch={(value)=> onSearch(value)}\r\n                        />\r\n                        :\r\n                        <Input placeholder=\"搜索\" value={inputValue} onChange={(e)=> onChange(e)}/>\r\n                    }\r\n                    \r\n                </div>\r\n                <div className=\"c-lm__model-linkman\">\r\n                    {\r\n                        memoList.map(item=> (\r\n                            <div key={item.username} onClick={()=> onTabItem && onTabItem(item)}>\r\n                                <ChatItem key={item.username} type={type} data={item}/>\r\n                            </div>\r\n                        ))\r\n                    }\r\n                </div>\r\n            </Modal>\r\n    )\r\n}\r\n\r\nexport default ChatModel\r\n","import React, { Fragment, useContext } from 'react'\r\nimport { UserAddOutlined } from '@ant-design/icons';\r\nimport './index.less'\r\nimport { message } from 'antd';\r\nimport {  queryLinkMan } from '../../../../common/server';\r\nimport ChatItem from '../../../../components/ChatItem';\r\nimport { chatContext } from '../../../../common/context';\r\nimport ChatModel from '../../../../components/Model';\r\n\r\nfunction Linkman(props) {\r\n    const { linkManList = [], noValidation = [] } = props;\r\n    const [isModalVisible, setIsModalVisible] = React.useState(false)\r\n    const [_linkManData, setLinkManData] = React.useState([])\r\n    const [queryList, setQueryList] = React.useState([])\r\n    // 获取Space组件传过来的显示用户面板context\r\n    const chatContextValue = useContext(chatContext)\r\n    const {setRightType, setCurrentUserOption} = chatContextValue\r\n\r\n    React.useEffect(()=> {\r\n      setLinkManData(linkManList.map(item=> ({...item, isSelected: false})))\r\n    }, [linkManList])\r\n    \r\n    function showModel() {\r\n        setIsModalVisible(true)\r\n    }\r\n\r\n    function handleCancel() {\r\n        setIsModalVisible(false)\r\n    }\r\n\r\n    function onClickItem(_index) {\r\n        const mapLinkManList = linkManList.map((item, index)=> {\r\n            return {\r\n                ...item,\r\n                isSelected: index === _index,\r\n            }\r\n        })\r\n        setRightType('home')\r\n        setLinkManData(mapLinkManList)\r\n        setCurrentUserOption(linkManList[_index])\r\n    }\r\n\r\n\r\n    async function onSearch(searchValue) {\r\n        if(!searchValue) return;\r\n        const queryList = await queryLinkMan(searchValue)\r\n        setQueryList(queryList)\r\n        if(!queryList.length) {\r\n            message.success('未找到否和的用户')\r\n        }\r\n        const ref = document.getElementsByClassName('ant-modal-body')[0]\r\n        ref.style.maxHeight = '400px'\r\n    }\r\n\r\n     return (\r\n        <Fragment>\r\n            <div onClick={showModel} className=\"c-lm\">\r\n                <UserAddOutlined />\r\n                <span>添加联系人</span>\r\n            </div>\r\n            {/* // 好友验证 */}\r\n            {\r\n            (noValidation || []).map(item=> {\r\n                return <ChatItem type='validation' key={item.username} data={item}></ChatItem>\r\n            })\r\n            }\r\n            {\r\n            _linkManData.map((item, index)=> { \r\n                return (\r\n                    <div key={item.username} onClick={()=> onClickItem(index)}>\r\n                        <ChatItem isSelected={item.isSelected} key={item.username} type=\"linkman\" data={item}></ChatItem>\r\n                    </div>\r\n                )\r\n            })\r\n            }\r\n            <ChatModel\r\n                isModalVisible={isModalVisible}\r\n                handleCancel={handleCancel}\r\n                queryList={queryList}\r\n                onSearch={onSearch}\r\n                title='添加新的联系人'\r\n                type=\"search\"\r\n            />\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default Linkman","import React, { Fragment } from 'react'\r\nimport { UsergroupAddOutlined } from '@ant-design/icons';\r\nimport ChatModel from '../../../../components/Model';\r\nimport { createGroup } from '../../../../common/server';\r\nimport { SmileTwoTone, \r\n    HeartTwoTone,\r\n    CheckCircleTwoTone,\r\n    BankTwoTone,\r\n    CarTwoTone,\r\n    CompassTwoTone,\r\n    CrownTwoTone,\r\n    BulbTwoTone,\r\n    StarTwoTone,\r\n} from '@ant-design/icons';\r\nimport  './index.less'\r\nimport { connect } from 'react-redux';\r\nimport { updateCurrentConverId } from '../../../../redux/actions/converId';\r\nimport { message } from 'antd';\r\n\r\n\r\nfunction randomIcon(converId) {\r\n    const index = converId.slice(-1);\r\n    switch (index) {\r\n        case '1':\r\n        return <SmileTwoTone/>;\r\n        case '2':\r\n        return <HeartTwoTone/>;\r\n        case '3':\r\n        return <CheckCircleTwoTone/>;\r\n        case '4':\r\n        return <BankTwoTone/>;\r\n        case '5':\r\n        return <CarTwoTone/>;\r\n        case '6':\r\n        return <CrownTwoTone/>;\r\n        case '7':\r\n        return <CompassTwoTone/>;\r\n        case '8':\r\n        return <BulbTwoTone/>;\r\n        case '9':\r\n        return <StarTwoTone/>;     \r\n        default:\r\n        return <SmileTwoTone/>;\r\n    }\r\n}\r\n\r\nfunction Group(props) {\r\n    const { contactData = [], \r\n        linkManList = [],\r\n        updateCurrentConverId = ()=> {},\r\n    } = props;\r\n    const [isModalVisible, setIsModalVisible] = React.useState(false)\r\n    const [mapList, setMapList] = React.useState(linkManList)\r\n\r\n    React.useEffect(()=> {\r\n        setMapList(mapList.map(item=> ({...item, checked:false})))\r\n    }, [])\r\n\r\n    function showModel() {\r\n        setIsModalVisible(true)\r\n    }\r\n\r\n    function handleCancel() {\r\n        setIsModalVisible(false)\r\n    }\r\n\r\n    function onTabItem(current) {\r\n        setMapList(mapList.map(item=> {\r\n            if(item.uid === current.uid) {\r\n                return {\r\n                    ...item,\r\n                    checked: !item.checked\r\n                }\r\n            }\r\n            return item\r\n        }))\r\n    }\r\n\r\n    function onClickItem(item) {\r\n        updateCurrentConverId(item.converId)\r\n    }\r\n\r\n    async function submit() {\r\n        const currentUidList = mapList.filter(item=> item.checked).map(item=> item.uid)\r\n        if(!currentUidList.length) {\r\n            setIsModalVisible(false)\r\n            return;\r\n        }else if(currentUidList.length < 3){\r\n            message.info('群聊需要至少勾选三位联系人')\r\n            return;\r\n        };\r\n        await createGroup(currentUidList)\r\n        setIsModalVisible(false)\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <div onClick={showModel} className=\"c-lm\">\r\n                <UsergroupAddOutlined />\r\n                <span>新建群聊</span>\r\n            </div>\r\n            <div className=\"c-group__content\">\r\n                {\r\n                    contactData.map(item=> {\r\n                        return (\r\n                            <li onClick={()=> onClickItem(item)} key={item.converId} className=\"c-group__content-item\">\r\n                                <div className=\"c-group__content-item-icon\">{randomIcon(item.converId)}</div>\r\n                                <div className=\"c-group__content-item-des\">{item.groupName}（{item.size}）</div>\r\n                            </li>\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n            \r\n            <ChatModel\r\n                isModalVisible={isModalVisible}\r\n                handleCancel={handleCancel}\r\n                queryList={mapList}\r\n                onTabItem={onTabItem}\r\n                title='新建群聊'\r\n                type=\"group\"\r\n                submit={submit}\r\n            />\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(()=>{\r\n    return {\r\n        \r\n    }\r\n},{\r\n    updateCurrentConverId,\r\n})(Group)\r\n","import { syncAppendConverAction, syncUpdateHistoryAction } from \"../redux/actions/currentChatData\";\r\nimport { addLinkmanAction } from \"../redux/actions/linkman\";\r\nimport { asyncAddValidaList } from \"../redux/actions/novalidation\";\r\nimport { addSessionAction } from \"../redux/actions/session\";\r\nimport { store } from \"../redux/store\";\r\n\r\nlet ws = null;\r\n\r\n// 此处使用了单例模式，每次new getWebSecket 都返回同一个实例\r\nfunction getWebSecket() {\r\n    if(ws) return ws;\r\n    ws = new WebSocket('ws://127.0.0.1:7779')\r\n\r\n    const SUB_UID = localStorage.getItem('uid');\r\n\r\n    ws.onopen = (()=> {\r\n        ws.sendMsg({\r\n            type: 'sub',\r\n        })\r\n    })\r\n\r\n    ws.onclose = ()=> {\r\n        console.log('客户端离线了');\r\n    }\r\n\r\n    ws.onmessage = ((msg)=> {\r\n        const { data: wsData } = msg;\r\n        const parseData = JSON.parse(wsData);\r\n        const {type, data} = parseData;\r\n        if(type === 'session') {\r\n            store.dispatch(syncUpdateHistoryAction(data))\r\n        }else if(type === 'linkmanRequest') {\r\n            store.dispatch(asyncAddValidaList(data))\r\n        } else if(type === 'linkmanResponse') {\r\n            const {userinfo, history, converId} = data;\r\n            store.dispatch(addLinkmanAction({...userinfo, converId}))\r\n            store.dispatch(addSessionAction({...userinfo, converId}))\r\n            store.dispatch(syncAppendConverAction(history))\r\n        }\r\n       \r\n    })\r\n\r\n    ws.sendMsg = (option) =>{\r\n        const { msg, type = 'pub', PUB_UID, converId } = option;\r\n        ws.send(JSON.stringify({\r\n            SUB_UID,\r\n            PUB_UID,\r\n            msg,\r\n            type,\r\n            converId,\r\n        }))\r\n    }\r\n\r\n    ws.sendGroup = (option)=> {\r\n        const { msg, type = 'pub', converId, members, talkerName } = option;\r\n        ws.send(JSON.stringify({\r\n            SUB_UID,\r\n            PUB_UID: members,\r\n            msg,\r\n            type,\r\n            converId,\r\n            talkerName,\r\n        }))\r\n        console.log(option);\r\n    }\r\n\r\n    return ws;\r\n}\r\n\r\nexport {\r\n    getWebSecket\r\n}","import React, { Fragment } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { getWebSecket } from '../../../../common/websocket';\r\nimport { syncUpdateHistoryAction } from '../../../../redux/actions/currentChatData';\r\nimport { Input } from 'antd';\r\nimport moment from 'moment'\r\nimport \"moment/locale/zh-cn\";\r\nimport './index.less'\r\nimport { DownCircleTwoTone } from '@ant-design/icons';\r\n\r\nmoment.locale(\"zh-cn\");\r\n\r\nfunction autoScroll(ref) {\r\n    const dom = ref.current;\r\n    if(!dom) return ()=>{};\r\n    return ()=> {\r\n        dom.scrollTop = dom.scrollHeight - dom.clientHeight;\r\n    }\r\n}\r\n\r\n\r\nfunction ChatPanel(props) {\r\n    const { \r\n        currentChatData, \r\n        converId,\r\n        syncUpdateHistoryAction,\r\n        currentChatUser,\r\n        nickName,\r\n     } = props;\r\n\r\n     const ws = new getWebSecket();\r\n\r\n    // chat面板时间\r\n    const lastLoginTime = moment((currentChatData.lastHistory || {}).date).calendar(); \r\n\r\n    // 聊天框的值\r\n    const [chatValue, setChatValue] = React.useState('')\r\n    // chat面板ref\r\n    const chatRef = React.useRef()\r\n    // 是否显示快读到底按钮\r\n    const [ isShowDown, setIsShowDown ] = React.useState()\r\n\r\n    React.useEffect(()=> {\r\n        autoScroll(chatRef)()\r\n    }, [currentChatData, converId])\r\n\r\n    React.useEffect(()=> {\r\n        const chatDom = chatRef.current;\r\n        chatDom.onscroll = ()=> {\r\n            setIsShowDown(!(chatDom.scrollTop >= chatDom.scrollHeight - 2 * chatDom.clientHeight))\r\n        }\r\n    }, [])\r\n    \r\n    function sendMessage() {\r\n        if(!chatValue) return;\r\n        const { type } = currentChatData;\r\n        const UID = localStorage.getItem('uid');\r\n\r\n        if(type === 'group') {\r\n            ws.sendGroup({\r\n                msg: chatValue,\r\n                SUB_UID: UID,\r\n                converId, \r\n                members: currentChatData.members,\r\n                type: 'text',\r\n                talkerName: nickName,\r\n            })\r\n        }else {\r\n            ws.sendMsg({\r\n                msg: chatValue,\r\n                PUB_UID: currentChatUser.uid, \r\n                SUB_UID: UID,\r\n                converId, \r\n                type: 'text'\r\n            })\r\n        }\r\n        syncUpdateHistoryAction({\r\n            date: new Date().getTime(),\r\n            talker: UID,\r\n            converId,\r\n            content: chatValue,\r\n            read: [],\r\n            type:'text',\r\n        })\r\n        setChatValue('')\r\n        setTimeout(()=> {\r\n            autoScroll(chatRef)()\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <div className=\"top\">\r\n                {\r\n                    currentChatData.type === \"group\" ? \r\n                    <span>{currentChatData.groupName}</span>\r\n                    :\r\n                    <span>与{currentChatUser.nickname}交谈中</span>\r\n                }\r\n            </div>\r\n            <div className=\"c-chat__content\">\r\n                {\r\n                    isShowDown ?\r\n                    <div onClick={autoScroll(chatRef)} className=\"c-cp__down\">\r\n                    <DownCircleTwoTone />\r\n                    </div>\r\n                    :\r\n                    null\r\n                }\r\n                \r\n                <div ref={chatRef} className=\"chat active-chat\" data-chat=\"person2\">\r\n                    <div className=\"conversation-start\">\r\n                        <span>{lastLoginTime}</span>\r\n                    </div>\r\n                    {\r\n                   (currentChatData.history || []).map(item=> {\r\n                        return(\r\n                            <div key={item.date} className={`c-cp__wrap bubble ${item.isMySelf ? 'c-cp__wrap_me' : 'c-cp__wrap_you'}`}>\r\n                                {\r\n                                    currentChatData.type === 'group' && !item.isMySelf?\r\n                                    <div className=\"c-cp__name\">{item.talkerName || '匿名用户'}</div>\r\n                                    :\r\n                                    null\r\n                                }\r\n                                <div className={`c-cp__item_chat ${item.isMySelf ? 'c-cp__item_me' : 'c-cp__item_you'}`}>{item.content}</div>\r\n                            </div>\r\n                        )\r\n                    })\r\n                    }\r\n                </div>\r\n            </div>\r\n            <div className=\"write-wrap\">\r\n                <div className=\"write\">\r\n                    <div className=\"write-link attach\"></div>\r\n                    <Input\r\n                    onChange={(e)=> setChatValue(e.target.value)}\r\n                    value={chatValue}\r\n                    onPressEnter={sendMessage}/>\r\n                    <div className=\"write-link smiley\"></div>\r\n                    <div onClick={sendMessage} className=\"write-link send\"></div>\r\n                </div>\r\n            </div>\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default connect(store=> ({\r\n    converId: store.converId,\r\n    nickName: store.userInfo.nickname,\r\n}), {\r\n    syncUpdateHistoryAction,\r\n})(ChatPanel)\r\n","import React from 'react'\r\nimport './index.css'\r\nimport { fetchChatHistoryData, fetchContactList,queryUserInfo } from '../../common/server';\r\nimport { Input,  Drawer } from 'antd';\r\nimport Header from './components/Header';\r\nimport Space from './components/Space/index';\r\nimport { connect } from 'react-redux';\r\nimport { updateUserInfoAction } from '../../redux/actions/userinfo'\r\nimport { updateSessionAction } from '../../redux/actions/session'\r\nimport { updateLinkmanAction } from '../../redux/actions/linkman'\r\nimport { updateValidaAction } from '../../redux/actions/novalidation'\r\nimport { updateCurrentConverId } from '../../redux/actions/converId'\r\nimport { syncUpdateChatDataAction } from '../../redux/actions/currentChatData'\r\nimport { updateGroupAction } from '../../redux/actions/group'\r\nimport FullLoading from '../../components/baseUi/FullLoading';\r\nimport {\r\n    ProfileOutlined,\r\n    UserOutlined,\r\n    TeamOutlined,\r\n  } from '@ant-design/icons';\r\nimport { NavLink, Redirect, Route, Switch } from 'react-router-dom';\r\nimport Session from './components/session';\r\nimport Linkman from './components/Linkman';\r\nimport Group from './components/Group';\r\nimport { updateSyncAvatoar } from '../../redux/actions/avatoar';\r\nimport ChatPanel from './components/ChatPanel';\r\nimport { chatContext } from '../../common/context';\r\n\r\n\r\nfunction Chat(props) {\r\n    const {updateUserInfoAction,\r\n         updateSyncAvatoar, \r\n         sessionList,\r\n         validationList,\r\n         linkManList,\r\n         updateSessionAction,\r\n         updateValidaAction,\r\n         updateLinkmanAction,\r\n         chatData,\r\n         converId,\r\n         syncUpdateChatDataAction,\r\n         updateCurrentConverId,\r\n         userInfo,\r\n         groupList,\r\n         updateGroupAction,\r\n    } = props;\r\n    \r\n    // 搜索框的值\r\n    const [searchValue, setSearchValue] = React.useState('')\r\n    // 抽屉是否显示\r\n    const [ drawerVisible, setDrawerVisible] = React.useState(false)\r\n    // 页面loading状态\r\n    const [ pageStatus, setPageStatus] = React.useState(false)\r\n    // 右方显示什么 chat为聊天面板， home为个人信息\r\n    const [ rightType, setRightType] = React.useState('chat')\r\n    // 右侧当前的用户信息\r\n    const [ currentUserInfo, setCurrentUserOption] = React.useState({})\r\n\r\n    const fetchChatData = async ()=> {\r\n        // 获取会话联系人数据 获取当前会话聊天数据\r\n        const [contactData, chatData, userInfo ] = await Promise.all([fetchContactList(), fetchChatHistoryData(), queryUserInfo()])\r\n        const { linkManList, sessionList, noValidation } = contactData;\r\n        // 更新userinfo\r\n        updateUserInfoAction(userInfo)\r\n        // 更新当前会话列表\r\n        updateSessionAction(sessionList)\r\n        // 更新验证数组\r\n        updateValidaAction(noValidation)\r\n        // 更新联系人\r\n        updateLinkmanAction(linkManList)\r\n        // 更新群组信息\r\n        const mapGroupList = chatData.filter(item=> item.type === \"group\")\r\n        .map(item=> ({\r\n            groupName:item.groupName, \r\n            converId: item._id, \r\n            size: (item.members || []).length\r\n        }))\r\n        updateGroupAction(mapGroupList)\r\n        // 将当前历史记录全部存入redux\r\n        syncUpdateChatDataAction(chatData)\r\n        // 默认选中会话中的第一个聊天人\r\n        if(!converId) {\r\n            updateCurrentConverId((sessionList[0] || {}).converId)\r\n        }\r\n        updateSyncAvatoar(userInfo.avatoar, false)\r\n        // 将页面变为正常状态\r\n        const timer = setTimeout(() => {\r\n         setPageStatus(true)\r\n         clearTimeout(timer)\r\n        }, 500);\r\n    }\r\n\r\n    React.useEffect(()=> {\r\n        fetchChatData()\r\n    }, [])\r\n\r\n    const currentChatData = React.useMemo(()=> {\r\n        return chatData.find(item=> item._id === converId) || {}\r\n    }, [converId, chatData])\r\n\r\n    // React.useEffect(()=> {\r\n    //     // let currentDataObj =  chatData.find(data=> data._id === currentSeleltConvId) || {}\r\n    //     // syncUpdateHistoryAction(currentDataObj)\r\n    // }, [currentSeleltConvId])\r\n\r\n    function onClickSession() {\r\n        setRightType('chat')\r\n    }\r\n\r\n\r\n    const currentChatUser = React.useMemo(()=> {\r\n        return sessionList.find(item=> item.converId === converId) || {}\r\n    }, [sessionList, converId])\r\n    \r\n\r\n    // 根据输入内容过滤出否和的联系人。 过滤规则，最后聊天记录 || 姓名\r\n    function filterList(dataList = []) {\r\n        const result = dataList.filter(item=> {\r\n            const { nickname = '', preview = '', groupName = '' } = item;\r\n            return nickname.includes(searchValue) || \r\n            !searchValue || \r\n            preview.includes(searchValue) ||\r\n            groupName.includes(searchValue)\r\n        });\r\n        return result;\r\n    }\r\n\r\n\r\n    \r\n    function onSwitchDrawer() {\r\n        setDrawerVisible(!drawerVisible)\r\n    }\r\n\r\n    return (\r\n        <FullLoading pageStatus={pageStatus}>\r\n            <div className=\"c-chat-bg\"></div>\r\n            <div className=\"wrapper\">\r\n                <div className=\"container\">\r\n                    <div className=\"left\">\r\n                        <Header onSwitchDrawer={onSwitchDrawer}/>\r\n                        <div className=\"top\">\r\n                            <Input type=\"text\" onChange={(e)=> setSearchValue(e.target.value)} value={searchValue} onPressEnter={()=> {}} placeholder=\"联系人\" />\r\n                        </div>\r\n                        <div className=\"c-chat-nav\">\r\n                            <NavLink onClick={onClickSession} to=\"/chatroom/session\" activeClassName=\"nav_active\" className=\"c-chat-nav-item\">\r\n                                <ProfileOutlined className=\"c-chat-nav-item-icon\"/>\r\n                                <span>会话</span>\r\n                            </NavLink>\r\n                            <NavLink to=\"/chatroom/linkman\" activeClassName=\"nav_active\" className=\"c-chat-nav-item\">\r\n                               <UserOutlined className=\"c-chat-nav-item-icon\" />\r\n                               <span>联系人</span>\r\n                            </NavLink>\r\n                            <NavLink onClick={onClickSession} to=\"/chatroom/group\" activeClassName=\"nav_active\" className=\"c-chat-nav-item\">\r\n                                <TeamOutlined className=\"c-chat-nav-item-icon\" />\r\n                                <span>群聊</span>\r\n                            </NavLink>\r\n                        </div>\r\n                        <div className=\"c-chat__list\">\r\n                            <chatContext.Provider  value={{setRightType, setCurrentUserOption}}>\r\n                                <ul className=\"people\">\r\n                                    <Switch>\r\n                                        <Route path=\"/chatroom/session\" render={()=> (\r\n                                            <Session contactData={filterList(sessionList)} />\r\n                                        )}/>\r\n                                        <Route path=\"/chatroom/linkman\" render={()=> (\r\n                                            <Linkman noValidation={validationList} linkManList={filterList(linkManList)}/>\r\n                                        )}/>\r\n                                        <Route path=\"/chatroom/group\" render={()=> (\r\n                                            <Group contactData={filterList(groupList)} linkManList={filterList(linkManList)}/>\r\n                                        )}/>\r\n                                        <Redirect to=\"/chatroom/session\"/>\r\n                                    </Switch>\r\n                                </ul>\r\n                            </chatContext.Provider>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"right\">\r\n                     {\r\n                         rightType === 'chat' ? \r\n                         <ChatPanel \r\n                         currentChatUser={currentChatUser}\r\n                         currentChatData={currentChatData}\r\n                         />\r\n                         :\r\n                         <Space userInfo={currentUserInfo} type='home'/>\r\n                     }\r\n                    </div>\r\n                    <Drawer \r\n                        className=\"c-chat-drawer\"\r\n                        title=\"个人资料\"\r\n                        placement=\"right\"\r\n                        closable={true}\r\n                        onClose={()=> onSwitchDrawer()}\r\n                        visible={drawerVisible}\r\n                        getContainer={false}\r\n                        style={{ position: 'absolute' }}\r\n                        >\r\n                        <Space userInfo={userInfo} type=\"update\" onClose={()=> onSwitchDrawer()}/>\r\n                    </Drawer>\r\n                </div>\r\n            </div>\r\n      \r\n       </FullLoading>\r\n    )\r\n}\r\n\r\nconst mapSteteToProps = (store)=> {\r\n    return {\r\n        sessionList: store.session,\r\n        linkManList: store.linkman,\r\n        validationList: store.navalidation,\r\n        chatData: store.chatData,\r\n        converId: store.converId,\r\n        userInfo: store.userInfo,\r\n        groupList: store.group,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    updateUserInfoAction,\r\n    updateSessionAction,\r\n    updateSyncAvatoar,\r\n    updateLinkmanAction,\r\n    updateValidaAction,\r\n    syncUpdateChatDataAction,\r\n    updateCurrentConverId,\r\n    updateGroupAction,\r\n}\r\nexport default connect(mapSteteToProps, mapDispatchToProps)(Chat)","import React, { Fragment } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { Redirect, Route } from 'react-router-dom';\r\n\r\nfunction PrivateRoute (props) {\r\n    const { path, component, login } = props;\r\n    return (\r\n        <Fragment>\r\n            {\r\n                login ? \r\n                <Fragment>\r\n                    <Route path={path} component={component}/>\r\n                </Fragment>\r\n                : \r\n                <Redirect to='/account'/>\r\n            }\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default connect((store)=> ({\r\n    login: store.login,\r\n}))(PrivateRoute)\r\n","import React, { Component } from 'react'\r\nimport { HashRouter, Route, Switch, Redirect} from 'react-router-dom'\r\nimport Account from '../pages/Account'\r\nimport Chat from '../pages/Chat'\r\nimport PrivateRoute from './PrivateRoute '\r\n\r\nexport default class RouterPage extends Component {\r\n    render() {\r\n        return (\r\n            <HashRouter>\r\n                <Switch>\r\n                    <Route path='/account' component={Account}/>\r\n                    {/* 当PrivateRoute组件被switch包裹的时候，只有路径匹配对了之后，才会执行组件内代码，\r\n                        当没有被switch包裹时候组件内代码在路径不匹配时候也会执行。\r\n                        姑且当做Switch组件的特性 \r\n                    */}\r\n                    <PrivateRoute path='/chatroom' component={Chat}/>\r\n                    <Redirect to='/account'/>\r\n                </Switch>\r\n            </HashRouter>\r\n        )\r\n    }\r\n}\r\n","import './App.css';\nimport 'antd/dist/antd.css';\nimport './less/reset.min.css' \nimport RouterPage from './routers';\nimport { Provider } from 'react-redux'\nimport {store, persistor} from './redux/store';\nimport { PersistGate } from 'redux-persist/integration/react'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Provider store={store}>\n        <PersistGate loading={null} persistor={persistor}>\n          <RouterPage></RouterPage>\n        </PersistGate>\n      </Provider>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  // <React.StrictMode>\n    <App />,\n  // </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}